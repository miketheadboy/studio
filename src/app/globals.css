
@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: var(--font-special-elite), var(--font-inter), sans-serif; /* Default to typewriter, fallback to Inter */
}

@layer base {
  :root {
    /* New Palette: Blues, Reds, Yellows, Sketchbook Paper */
    --background: 45 50% 96%; /* #f9f7f2 - Sketchbook paper */
    --foreground: 210 30% 25%; /* #2a3b4d - Dark blue/charcoal for text */
    
    --card: 40 60% 97%; /* #faf6f2 - Slightly warmer paper, like a pasted note */
    --card-foreground: 210 30% 25%;
    
    --popover: 40 60% 97%;
    --popover-foreground: 210 30% 25%;
    
    --primary: 210 70% 50%; /* #3377cc - Strong Blue */
    --primary-foreground: 0 0% 100%; /* #ffffff - White */
    
    --secondary: 0 80% 60%; /* #ff4d4d - Bright Red */
    --secondary-foreground: 0 0% 100%; /* #ffffff - White */
    
    --muted: 50 60% 90%; /* #f2e9c9 - Very light dull yellow */
    --muted-foreground: 210 30% 45%; /* #4c6279 - Softer dark blue */
    
    --accent: 50 100% 60%; /* #ffcc33 - Bright Yellow */
    --accent-foreground: 210 30% 20%; /* #212f3c - Darker text for yellow accent */
    
    --destructive: 0 70% 55%; /* #e04c4c - A clear but not overly harsh red */
    --destructive-foreground: 0 0% 100%;
    
    --border: 210 30% 70%; /* #9cb2c8 - Muted blue border */
    --input: 45 50% 98%; /* #fcfaf5 - Lighter paper for input */
    --ring: 210 70% 50%; /* Primary blue for rings */
    
    --radius: 0.5rem;

    /* Chart colors (can be adjusted if charts are used) */
    --chart-1: 210 70% 60%; /* Lighter Blue */
    --chart-2: 0 80% 70%;   /* Lighter Red */
    --chart-3: 50 100% 70%; /* Lighter Yellow */
    --chart-4: 220 50% 65%; /* Muted Indigo */
    --chart-5: 30 90% 60%;  /* Orange-Yellow */

    /* Custom font variables (existing) */
    --font-rock-salt: 'Rock Salt', cursive;
    --font-inter: 'Inter', sans-serif;
    --font-homemade-apple: 'Homemade Apple', cursive;
    --font-architects-daughter: 'Architects Daughter', cursive;
    --font-special-elite: 'Special Elite', cursive;
    --font-bangers: 'Bangers', cursive;
    --font-nothing-you-could-do: 'Nothing You Could Do', cursive;
    --font-covered-by-your-grace: 'Covered By Your Grace', cursive;
    --font-caveat: 'Caveat', cursive;
  }

  .dark {
    /* Dark Mode - Sketchbook at night! */
    --background: 210 30% 15%; /* #1c2633 - Very dark blue */
    --foreground: 45 50% 85%; /* #e1dccd - Light paper text */
    
    --card: 210 30% 20%; /* #212f3c - Darker card */
    --card-foreground: 45 50% 85%;
    
    --popover: 210 30% 20%;
    --popover-foreground: 45 50% 85%;
    
    --primary: 210 80% 70%; /* #80b3ff - Brighter Blue for dark mode */
    --primary-foreground: 210 30% 10%; /* #111a24 */
    
    --secondary: 0 90% 75%; /* #ff9999 - Brighter Red for dark mode */
    --secondary-foreground: 0 0% 10%; /* #1a1a1a */
    
    --muted: 210 30% 25%; /* #2a3b4d - Dark muted */
    --muted-foreground: 210 30% 65%; /* #8ea4ba */
    
    --accent: 50 100% 70%; /* #ffdd66 - Brighter Yellow for dark mode */
    --accent-foreground: 50 100% 20%; /* #664c00 */
    
    --destructive: 0 80% 65%; /* #ff8080 */
    --destructive-foreground: 0 0% 10%;
    
    --border: 210 30% 40%; /* #40556b */
    --input: 210 30% 22%; /* #253442 */
    --ring: 210 80% 70%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-special-elite), var(--font-inter), sans-serif; /* Applied default */
  }
  
  .page-title-font {
    font-family: var(--font-rock-salt);
    color: hsl(var(--primary)); /* Use primary blue */
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .handwritten-main-title-font { 
    font-family: var(--font-homemade-apple); 
    font-size: 2.5rem; 
    color: hsl(var(--secondary-foreground) / 80%); 
    background-color: hsl(var(--secondary)); 
    padding: 0.2em 0.5em; 
    display: inline-block; 
    transform: rotate(-2deg); 
    box-shadow: 3px 3px 0px hsl(var(--foreground) / 0.2); 
    overflow-wrap: break-word;
    word-break: break-word;
  } 
  .handwritten-section-title-font { 
    font-family: var(--font-architects-daughter); 
    font-size: 1.85rem; 
    color: hsl(var(--primary)); 
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .typewriter-font { 
    font-family: var(--font-special-elite); 
  } 
  .alt-heading-font { 
    font-family: var(--font-bangers); 
    letter-spacing: 0.05em; 
    color: hsl(var(--secondary)); 
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .scrapbook-note-font { 
    font-family: var(--font-covered-by-your-grace); 
    font-size: 1.1rem; 
    color: hsl(var(--foreground) / 0.9); 
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .dylan-quote {
    font-family: var(--font-nothing-you-could-do);
    font-size: 1.3rem;
    color: hsl(var(--muted-foreground)); 
    border-left-width: 4px;
    border-left-style: dashed;
    border-left-color: hsl(var(--accent)); /* Bright yellow */
    @apply pl-4 pr-3 py-3 mt-2 italic bg-muted/30 rounded-sm; /* Increased padding */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  .main-section-title {
    font-family: var(--font-rock-salt);
    @apply text-3xl sm:text-4xl text-center mb-6 pb-2 border-b-2 border-dashed border-accent; /* Yellow dashed border */
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .subsection-title {
    font-family: var(--font-architects-daughter);
    @apply text-xl sm:text-2xl mb-3;
    overflow-wrap: break-word;
    word-break: break-word;
  }
  
  /* Theme colors for main section titles */
  .canvas-title { color: hsl(var(--primary)); } /* Blue */
  .sparks-muses-title { color: hsl(var(--accent)); } /* Yellow */
  .lyrical-toolkit-title { color: hsl(200 70% 50%); } /* Another Blue */
  .musical-toolkit-title { color: hsl(var(--secondary)); } /* Red */
  .song-generator-title { color: hsl(25 80% 55%); } /* Orange-ish for contrast */

  /* Sub-section title colors - map to new palette */
  .phrase-spark-title { color: hsl(30 90% 58%); } /* Orange/Yellow */
  .sonic-lab-title { color: hsl(190 60% 50%); } /* Cyan/Blue */
  .lyrical-mood-ring-title { color: hsl(220 60% 60%); } /* Indigo/Blue */
  .song-structure-title { color: hsl(var(--accent)); } /* Yellow */
  .metaphor-builder-title { color: hsl(240 50% 65%); } /* Purple/Blue */
  .riff-altar-title { color: hsl(var(--secondary)); } /* Red */
  .chord-forge-title { color: hsl(var(--accent)); } /* Yellow */
  .chord-reharmonizer-title { color: hsl(260 50% 60%); } /* Purple */
  .chord-voicing-title { color: hsl(120 40% 55%); } /* Greenish - for variety */
  .instrumentation-title { color: hsl(240 50% 65%); } 
  .artist-inspiration-title { color: hsl(240 50% 65%); } 
  .muse-whisper-title { color: hsl(var(--primary));} /* Blue */
  .name-that-noise-title { color: hsl(var(--accent)); } /* Yellow */
  .poets-corner-title { color: hsl(var(--secondary)); } /* Red */
  .bridge-builder-title { color: hsl(30 50% 64%); } 
  .melody-spark-title { color: hsl(200 50% 60%); } /* Light Blue */
  .study-song-title { color: hsl(200 50% 60%); } 
  .rhythm-architect-title { color: hsl(280 50% 56%); } /* Purple */
  .word-association-title { color: hsl(var(--foreground) / 0.8); } 
  .rhyme-scheme-title { color: hsl(300 70% 50%); } /* Magenta */
  .section-expander-title { color: hsl(33 100% 50%); } /* Dark Orange */

  .output-display-area {
    @apply mt-4 p-4 bg-white rounded border-2 border-dashed border-muted-foreground shadow-inner min-h-[80px] whitespace-pre-wrap; /* Increased min-height and padding */
    font-family: var(--font-special-elite); /* Explicitly ensure typewriter font */
    color: hsl(var(--foreground));
    line-height: 1.7; /* Slightly increased line-height */
    overflow-wrap: break-word; /* Crucial for breaking long words */
    word-break: break-word; /* Alternative, often interchangeable */
  }
  .send-buttons-container {
    @apply mt-4 flex gap-3 flex-wrap;
  }
  .loader {
    border: 4px solid hsl(var(--muted)); 
    border-top: 4px solid hsl(var(--primary)); /* Blue spinner */
    @apply rounded-full w-8 h-8 animate-spin mx-auto my-5;
  }
  .main-section-box {
    background-color: hsl(var(--card)); /* Default background for sections, can be overridden by ID */
    @apply border-2 border-dashed border-[hsl(var(--border))] rounded-lg p-4 sm:p-6 mb-8 shadow-xl relative; /* Responsive padding */
  }

  /* Specific background colors for sections for collage/journal page effect - now opaque */
  #introSection { background-color: hsl(var(--muted)); border-left: 5px solid hsl(var(--accent)); }
  #howToSection { background-color: hsl(45 50% 92%); border-left: 5px solid hsl(var(--secondary)); } /* Slightly different paper */
  #songCanvasSection { background-color: hsl(var(--card)); border-top: 5px dashed hsl(var(--primary)); } 
  #sparksMusesSection { background-color: hsl(50 100% 95%); border-top: 5px dashed hsl(var(--accent)); } /* Light yellow paper */
  #lyricalToolkitSection { background-color: hsl(200 70% 95%); border-top: 5px dashed hsl(200 70% 50%); } 
  #musicalToolkitSection { background-color: hsl(0 80% 95%); border-top: 5px dashed hsl(var(--secondary)); } 
  #completeSongGeneratorSection { background-color: hsl(25 80% 95%); border-top: 5px dashed hsl(25 80% 55%); }

  .tool-card {
    background-color: hsl(var(--background)); /* Use main background for cards to make them look like cutouts on the section */
    @apply border-2 border-dotted border-[hsl(var(--foreground)/0.5)] rounded-md p-4 sm:p-6 shadow-lg relative; /* Responsive padding */
    transform: rotate(calc( (var(--random-rotate, 0) - 0.5) * 1.5deg )); /* Reduced Random small rotation for collage */
    overflow: hidden; /* Helps contain children if absolutely necessary, but padding/wrapping is preferred */
  }
  .tool-card:nth-child(odd) { --random-rotate: 0.6; }
  .tool-card:nth-child(even) { --random-rotate: 0.4; }


  .collapsible-content .tool-card {
    background-color: hsl(var(--background)); 
  }

  #tipBox { 
    background-color: hsl(var(--accent)/0.8); /* Slightly more opaque yellow */
    border: 2px dashed hsl(var(--accent)); 
    font-family: var(--font-covered-by-your-grace);
    color: hsl(var(--accent-foreground)); 
    @apply p-4 mb-6 rounded-md text-center text-lg shadow-md;
    overflow-wrap: break-word;
    word-break: break-word;
  }
}

/* Styles for Shadcn Accordion to match collapsible sections */
.collapsible-header-style {
  @apply flex flex-1 items-center justify-between py-4 font-medium transition-all text-left; /* Added text-left */
  font-family: var(--font-bangers); /* Bangers for accordion headers */
  font-size: 1.5rem;
  letter-spacing: 0.05em;
  overflow-wrap: break-word; /* For accordion headers */
  word-break: break-word;
}
.collapsible-header-style:hover {
  color: hsl(var(--primary));
}
.collapsible-trigger-style > svg {
  @apply h-6 w-6 shrink-0 transition-transform duration-300 text-[hsl(var(--primary))]; 
}
.collapsible-trigger-style[data-state=open] > svg {
  transform: rotate(90deg); /* More typical accordion icon rotation */
}

.word-association-chat {
    @apply border-2 border-dashed border-[hsl(var(--border))] rounded p-3 max-h-[300px] overflow-y-auto bg-[hsl(var(--muted)/0.5)] text-sm mt-4;
    font-family: var(--font-special-elite);
    overflow-wrap: break-word;
    word-break: break-word;
}
.word-association-message-user {
    @apply text-[hsl(var(--primary))] text-right mb-2; /* Blue for user */
}
.word-association-message-ai {
    @apply text-[hsl(var(--secondary))] text-left mb-2; /* Red for AI */
}
.word-association-message-user::before {
    content: 'You: ';
    @apply font-bold;
}
.word-association-message-ai::before {
    content: 'AI: ';
    @apply font-bold;
}

/* Specific button styles for the new theme */
.btn-send-lyrics { 
  @apply bg-primary text-primary-foreground hover:bg-primary/80 border-2 border-primary-foreground/50 shadow-md;
  font-family: var(--font-caveat);
  font-size: 1.1rem;
  padding: 0.5rem 1rem;
  border-radius: 0.3rem;
  transform: rotate(-1deg);
}
.btn-send-canvas { 
  @apply bg-secondary text-secondary-foreground hover:bg-secondary/80 border-2 border-secondary-foreground/50 shadow-lg;
  font-family: var(--font-caveat);
  font-size: 1.1rem;
  padding: 0.5rem 1rem;
  border-radius: 0.3rem;
  transform: rotate(1deg);
}
.btn-suggestion {
  @apply bg-accent text-accent-foreground border-2 border-accent-foreground/70 hover:bg-accent/80 shadow-xl;
  font-family: var(--font-rock-salt);
  @apply text-base px-6 py-3 rounded-md;
  transform: rotate(1deg);
}
.btn-toggle-phrases {
  @apply bg-primary text-primary-foreground hover:bg-primary/80 border-2 border-primary-foreground/50;
  font-family: var(--font-bangers);
  letter-spacing: 0.05em;
}
.btn-structure {
    background-color: hsl(var(--muted)); 
    color: hsl(var(--muted-foreground));
    font-family: var(--font-architects-daughter);
    @apply px-3 py-1.5 text-sm rounded-sm border-2 border-dashed border-[hsl(var(--border))] m-1 hover:bg-[hsl(var(--border))] hover:text-background shadow-sm;
}

/* Ensure Card Content manages overflow */
.tool-card > div[data-slot="card-content"], /* Targeting ShadCN CardContent slot if possible */
.tool-card .p-6.pt-0 { /* Fallback if direct slot targeting isn't straightforward */
  overflow-wrap: break-word;
  word-break: break-word;
}

.phrase-card {
  @apply p-3 flex flex-col bg-background shadow-sm hover:shadow-lg transition-shadow border-muted-foreground;
  overflow-wrap: break-word; /* ensure text within phrase cards wraps */
  word-break: break-word;
}

.phrase-card > span.font-semibold { /* Target the phrase text itself */
  display: block; /* Ensure it respects width */
  overflow-wrap: break-word;
  word-break: break-word;
}

/* Add to existing AccordionItem to ensure content within doesn't break out due to padding */
.main-section-box .pb-4.pt-0 { /* Targeting AccordionContent inner div */
  overflow-x: hidden; /* Prevent horizontal overflow from accordion content */
}

    