
@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: var(--font-special-elite), var(--font-inter), sans-serif; /* Default to typewriter, fallback to Inter */
}

@layer base {
  :root {
    /* Palette: Stippling Flowers Graffiti Abandoned Building - No Pink/Neon, Textured BG feel */
    --background: 40 30% 96%; /* Very pale, warm off-white - like aged paper/primed wall */
    --foreground: 40 10% 25%; /* Dark, slightly warm desaturated brown-grey - for text */
    
    --card: 40 25% 92%; /* Slightly darker aged paper/light concrete */
    --card-foreground: 40 10% 25%;
    
    --popover: 40 25% 94%; /* Slightly lighter popover on aged paper */
    --popover-foreground: 40 10% 25%;
    
    --primary: 220 50% 55%; /* Deep, fairly saturated blue - graffiti accent (replaces magenta) */
    --primary-foreground: 0 0% 100%; /* White */
    
    --secondary: 25 70% 58%; /* Dusty Orange, less saturated - graffiti accent */
    --secondary-foreground: 25 10% 15%; /* Very dark brown for contrast on orange */
    
    --muted: 40 20% 88%; /* Desaturated light beige/grey - weathered concrete */
    --muted-foreground: 40 10% 45%; /* Medium desaturated brown-grey */
    
    --accent: 170 40% 50%; /* Faded Teal/Green - graffiti accent or "oxidized metal" */
    --accent-foreground: 0 0% 100%; /* White */
    
    --destructive: 0 60% 50%; /* Slightly desaturated red - like faded warning paint */
    --destructive-foreground: 0 0% 100%;
    
    --border: 40 15% 70%; /* Medium warm grey - for general borders, like cracks or outlines */
    --input: 40 30% 98%; /* Very light, clean input area, like a fresh page in a found journal */
    --ring: 220 50% 55%; /* Primary blue for focus rings - graffiti highlight */
    
    --radius: 0.3rem; /* Slightly sharper radius for a more "industrial" or cut-out feel */

    /* Chart colors - graffiti inspired, adjusted for new palette */
    --chart-1: 220 50% 65%; /* Lighter Blue */
    --chart-2: 25 70% 68%;   /* Lighter Orange */
    --chart-3: 170 40% 60%; /* Lighter Teal/Green */
    --chart-4: 40 10% 40%;  /* Dark Warm Grey */
    --chart-5: 35 40% 50%;  /* Ochre/Brown - like rust or earth */

    /* Custom font variables (existing) */
    --font-rock-salt: 'Rock Salt', cursive;
    --font-inter: 'Inter', sans-serif;
    --font-homemade-apple: 'Homemade Apple', cursive;
    --font-architects-daughter: 'Architects Daughter', cursive;
    --font-special-elite: 'Special Elite', cursive;
    --font-bangers: 'Bangers', cursive;
    --font-nothing-you-could-do: 'Nothing You Could Do', cursive;
    --font-covered-by-your-grace: 'Covered By Your Grace', cursive;
    --font-caveat: 'Caveat', cursive;
  }

  .dark {
    /* Dark Mode - Abandoned building at night, lit by stray light - No Pink/Neon */
    --background: 220 10% 12%; /* Very dark, slightly desaturated blue-grey */
    --foreground: 220 15% 85%; /* Light grey/off-white text - chalk marks */
    
    --card: 220 10% 18%; /* Darker grey slab */
    --card-foreground: 220 15% 85%;
    
    --popover: 220 10% 15%;
    --popover-foreground: 220 15% 85%;
    
    --primary: 220 60% 70%; /* Brighter Blue for dark mode (replaces magenta) */
    --primary-foreground: 220 10% 10%; 
    
    --secondary: 25 80% 70%; /* Brighter Dusty Orange for dark mode, less saturated */
    --secondary-foreground: 25 10% 10%; 
    
    --muted: 220 10% 25%; /* Dark muted grey */
    --muted-foreground: 220 15% 70%; 
    
    --accent: 170 50% 65%; /* Brighter Faded Teal/Green for dark mode */
    --accent-foreground: 170 100% 15%; 
    
    --destructive: 0 70% 60%; 
    --destructive-foreground: 0 0% 10%;
    
    --border: 220 10% 40%; 
    --input: 220 10% 22%; 
    --ring: 220 60% 70%; /* Primary blue for dark mode focus rings */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-special-elite), var(--font-inter), sans-serif;
  }
  
  .page-title-font {
    font-family: var(--font-rock-salt); /* Graffiti-esque */
    color: hsl(var(--primary)); /* Use new primary blue */
    overflow-wrap: break-word;
    word-break: break-word;
    @apply text-4xl sm:text-5xl; /* Smaller */
    text-shadow: 1px 1px 0px hsl(var(--foreground) / 0.2), 
                 2px 2px 0px hsl(var(--foreground) / 0.15),
                 3px 3px 0px hsl(var(--primary) / 0.3); /* Stencil/graffiti depth */
  }
  .handwritten-main-title-font { 
    font-family: var(--font-homemade-apple); 
    font-size: 2rem;  /* Smaller */
    color: hsl(var(--secondary-foreground)); 
    background-color: hsl(var(--secondary)); /* Dusty Orange BG */
    padding: 0.2em 0.4em; /* Slightly less padding */
    display: inline-block; 
    transform: rotate(-1.5deg); 
    box-shadow: 2px 2px 0px hsl(var(--foreground) / 0.3); 
    overflow-wrap: break-word;
    word-break: break-word;
    text-shadow: 1px 1px 0px hsl(var(--foreground) / 0.15); /* Subtle lift */
  } 
  .handwritten-section-title-font { 
    font-family: var(--font-architects-daughter); 
    font-size: 1.5rem; /* Smaller */
    color: hsl(var(--accent)); /* Faded Teal/Green */
    overflow-wrap: break-word;
    word-break: break-word;
    padding-bottom: 4px; /* Space for underline */
    border-bottom: 2px dashed hsl(var(--muted-foreground) / 0.4); /* Sketched underline */
    display: inline-block; /* So border-bottom only spans the text */
  }
  .typewriter-font { 
    font-family: var(--font-special-elite); 
  } 
  .alt-heading-font { /* Could be for stenciled-look headers */
    font-family: var(--font-bangers); 
    letter-spacing: 0.05em; 
    color: hsl(var(--secondary)); /* Dusty Orange */
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .scrapbook-note-font { /* For smaller, scribbled notes */
    font-family: var(--font-covered-by-your-grace); 
    font-size: 1rem; /* Slightly smaller */
    color: hsl(var(--muted-foreground)); 
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .dylan-quote { /* Like graffiti or a found note */
    font-family: var(--font-nothing-you-could-do);
    font-size: 1.15rem; /* Slightly smaller */
    color: hsl(var(--foreground) / 0.9); 
    border-left-width: 3px;
    border-left-style: solid;
    border-left-color: hsl(var(--accent)); /* Teal/Green accent line */
    @apply pl-3 pr-2 py-2 mt-1 bg-card/70 rounded-sm italic; /* Tighter padding */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  .main-section-title {
    font-family: var(--font-rock-salt); /* Graffiti style */
    @apply text-2xl sm:text-3xl text-center mb-4 pb-1 border-b-2 border-solid border-border; /* Smaller */
    overflow-wrap: break-word;
    word-break: break-word;
  }
  .subsection-title {
    font-family: var(--font-architects-daughter); /* Sketchy graffiti */
    @apply text-lg sm:text-xl mb-2; /* Smaller */
    overflow-wrap: break-word;
    word-break: break-word;
  }
  
  /* Theme colors for main section titles - graffiti accents */
  .canvas-title { color: hsl(var(--primary)); } /* New Primary Blue */
  .sparks-muses-title { color: hsl(var(--accent)); } /* Teal/Green */
  .lyrical-toolkit-title { color: hsl(var(--secondary)); } /* Dusty Orange */
  .musical-toolkit-title { color: hsl(var(--primary)); } /* New Primary Blue */
  .song-generator-title { color: hsl(var(--accent)); } /* Teal/Green */

  /* Sub-section title colors - graffiti accents */
  .phrase-spark-title { color: hsl(var(--secondary)); } 
  .sonic-lab-title { color: hsl(var(--accent)); } 
  .lyrical-mood-ring-title { color: hsl(var(--primary)); } 
  .song-structure-title { color: hsl(var(--accent)); } 
  .metaphor-builder-title { color: hsl(var(--primary)); } 
  .riff-altar-title { color: hsl(var(--secondary)); } 
  .chord-forge-title { color: hsl(var(--accent)); } 
  .chord-reharmonizer-title { color: hsl(var(--primary)); } 
  .chord-voicing-title { color: hsl(var(--secondary)); } 
  .instrumentation-title { color: hsl(var(--accent)); } 
  .artist-inspiration-title { color: hsl(var(--primary)); } 
  .thematic-prompts-title { color: hsl(var(--secondary));} /* Changed from muse-whisper-title */
  .album-title-generator-title { color: hsl(var(--accent)); }  /* Changed from name-that-noise-title */
  .poets-corner-title { color: hsl(var(--primary)); } 
  .bridge-builder-title { color: hsl(var(--secondary)); } 
  .melody-spark-title { color: hsl(var(--accent)); } 
  .study-song-title { color: hsl(var(--primary)); } 
  .rhythm-architect-title { color: hsl(var(--secondary)); } 
  .word-association-title { color: hsl(var(--foreground) / 0.8); } 
  .rhyme-scheme-title { color: hsl(var(--accent)); } 
  .section-expander-title { color: hsl(var(--primary)); } 

  .output-display-area {
    @apply mt-3 p-3 bg-input rounded border border-dashed border-border shadow-inner min-h-[60px] whitespace-pre-wrap; /* Smaller min-height, tighter padding */
    font-family: var(--font-special-elite); 
    color: hsl(var(--foreground));
    line-height: 1.6; /* Tighter line height */
    overflow-wrap: break-word; 
    word-break: break-word; 
  }
  .send-buttons-container {
    @apply mt-3 flex gap-2 flex-wrap; /* Tighter margin, gap */
  }
  .loader {
    border: 3px solid hsl(var(--muted)); 
    border-top: 3px solid hsl(var(--primary)); /* New Primary blue spinner */
    @apply rounded-full w-6 h-6 animate-spin mx-auto my-4; /* Smaller */
  }
  .main-section-box {
    background-color: hsl(var(--card)); /* Aged paper/concrete */
    @apply border border-solid border-[hsl(var(--border)/0.7)] rounded-md p-3 sm:p-4 mb-6 shadow-lg relative; /* Smaller padding & margin */
    overflow-wrap: break-word;
    word-break: break-word;
    /* Corner bracket graphical elements */
    position: relative; 
  }

  .main-section-box::before,
  .main-section-box::after {
    content: '';
    position: absolute;
    width: 25px; /* Slightly larger */
    height: 25px; /* Slightly larger */
    border-color: hsl(var(--foreground) / 0.65); /* More solid, darker */
    border-style: solid;
    pointer-events: none; /* So they don't interfere with clicks */
  }
  .main-section-box::before {
    top: -7px; /* Adjusted for new size */
    left: -7px; /* Adjusted for new size */
    border-width: 4px 0 0 4px; /* Thicker border */
    border-top-left-radius: 4px; /* Slight rounding to match card */
  }
  .main-section-box::after {
    bottom: -7px; /* Adjusted for new size */
    right: -7px; /* Adjusted for new size */
    border-width: 0 4px 4px 0; /* Thicker border */
    border-bottom-right-radius: 4px; /* Slight rounding to match card */
  }


  /* Specific background colors for sections for collage/journal page effect */
  #introSection { background-color: hsl(var(--muted)/0.8); border-left: 4px solid hsl(var(--accent)); } /* Weathered concrete with teal/green graf mark */
  #howToSection { background-color: hsl(var(--card) / 0.95); border-left: 4px solid hsl(var(--secondary)); } /* Slightly different paper with orange mark */
  #songCanvasSection { background-color: hsl(var(--background)); border-top: 2px solid hsl(var(--primary)); } /* Main paper with blue solid line */
  #sparksMusesSection { background-color: hsl(var(--card) / 0.92); border-top: 2px solid hsl(var(--accent)); } 
  #lyricalToolkitSection { background-color: hsl(var(--card) / 0.88); border-top: 2px solid hsl(var(--secondary)); } 
  #musicalToolkitSection { background-color: hsl(var(--card) / 0.92); border-top: 2px solid hsl(var(--primary)); } 
  #completeSongGeneratorSection { background-color: hsl(var(--card) / 0.88); border-top: 2px solid hsl(var(--accent)); }
  #inspirationWellSection { background-color: hsl(var(--card) / 0.9); border-top: 2px solid hsl(var(--border));}


  .tool-card {
    background-color: hsl(var(--background)); /* Main paper, like cutouts */
    @apply border border-dashed border-[hsl(var(--foreground)/0.4)] rounded-sm p-3 sm:p-4 shadow-md relative; /* Smaller padding, dashed like chalk or tape */
    transform: rotate(calc( (var(--random-rotate, 0) - 0.5) * 0.5deg )); /* Even more subtle rotation */
    overflow: hidden; 
    overflow-wrap: break-word;
    word-break: break-word;
    position: relative; /* For pseudo-element */
  }
  .tool-card:nth-child(odd) { --random-rotate: 0.55; }
  .tool-card:nth-child(even) { --random-rotate: 0.45; }
  
  /* "Pin" or "Tack" for tool cards */
  .tool-card::after {
    content: '';
    position: absolute;
    top: 5px; /* Adjusted */
    left: 5px; /* Adjusted */
    width: 10px; /* Larger "tack" head */
    height: 10px;
    background-color: hsl(var(--muted-foreground)); /* More metallic color */
    border: 1px solid hsl(var(--foreground) / 0.5); /* Outline for tack */
    border-radius: 50%;
    box-shadow: 1px 1px 2px hsl(var(--foreground) / 0.4); /* Slightly stronger shadow */
    pointer-events: none;
    z-index: 1; /* Ensure it's on top */
  }


  #tipBox { 
    background-color: hsl(var(--accent)/0.15); /* Very subtle teal/green wash */
    border: 1px solid hsl(var(--accent)); 
    font-family: var(--font-covered-by-your-grace); /* Scribbled tip */
    color: hsl(var(--accent-foreground)); 
    @apply p-3 mb-4 rounded-sm text-center text-base shadow-sm; /* Smaller padding, margin, font */
    overflow-wrap: break-word;
    word-break: break-word;
  }
}

.collapsible-header-style {
  @apply flex flex-1 items-center justify-between py-3 font-medium transition-all text-left; /* Smaller py */
  font-family: var(--font-bangers); /* Stencil/Graffiti style */
  font-size: 1.25rem; /* Smaller */
  letter-spacing: 0.05em;
  color: hsl(var(--primary)); /* New primary blue */
  overflow-wrap: break-word; 
  word-break: break-word;
  position: relative; /* For pseudo-element */
}
.collapsible-header-style:hover {
  color: hsl(var(--primary) / 0.8);
}
/* Subtle underline for accordion headers */
.collapsible-header-style::after {
  content: '';
  position: absolute;
  bottom: 1px; /* Adjust vertical position */
  left: 0;
  width: 30px; /* Length of the underline */
  height: 2px; /* Thickness of the underline */
  background-color: hsl(var(--primary) / 0.5); /* Graffiti color, semi-transparent */
  transition: background-color 0.2s ease-in-out, width 0.2s ease-in-out;
}
.collapsible-header-style:hover::after {
  width: 50px; /* Underline expands slightly on hover */
  background-color: hsl(var(--primary)); /* More opaque on hover */
}

.collapsible-trigger-style > svg {
  @apply h-5 w-5 shrink-0 transition-transform duration-300 text-[hsl(var(--primary))]; /* Smaller icon */
}
.collapsible-trigger-style[data-state=open] > svg {
  transform: rotate(90deg); 
}


.word-association-chat {
    @apply border border-dashed border-[hsl(var(--border))] rounded p-2 max-h-[250px] overflow-y-auto bg-[hsl(var(--muted)/0.3)] text-xs mt-3; /* Smaller padding, max-height, font */
    font-family: var(--font-special-elite);
    overflow-wrap: break-word;
    word-break: break-word;
}
.word-association-message-user {
    @apply text-[hsl(var(--primary))] text-right mb-1; /* New primary blue for user, smaller margin */
}
.word-association-message-ai {
    @apply text-[hsl(var(--accent))] text-left mb-1; /* Teal/Green for AI, smaller margin */
}
.word-association-message-user::before {
    content: 'You: ';
    @apply font-bold;
}
.word-association-message-ai::before {
    content: 'AI: ';
    @apply font-bold;
}

/* Button styles to fit the theme */
.btn-send-lyrics { 
  @apply bg-primary text-primary-foreground hover:bg-primary/80 border border-primary-foreground/30 shadow-sm;
  font-family: var(--font-caveat);
  font-size: 1rem; /* Smaller */
  padding: 0.4rem 0.8rem; /* Smaller */
  border-radius: 0.2rem; /* Sharper edges */
  transform: rotate(-0.5deg);
}
.btn-send-canvas { 
  @apply bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-secondary-foreground/30 shadow-md;
  font-family: var(--font-caveat);
  font-size: 1rem; /* Smaller */
  padding: 0.4rem 0.8rem; /* Smaller */
  border-radius: 0.2rem;
  transform: rotate(0.5deg);
}
.btn-suggestion {
  @apply bg-accent text-accent-foreground border border-accent-foreground/50 hover:bg-accent/80 shadow-lg;
  font-family: var(--font-rock-salt);
  @apply text-sm px-4 py-2 rounded-sm; /* Smaller font, padding */
  transform: rotate(0.5deg);
}
.btn-toggle-phrases {
  @apply bg-primary text-primary-foreground hover:bg-primary/80 border border-primary-foreground/30;
  font-family: var(--font-bangers);
  letter-spacing: 0.05em;
}
.btn-structure {
    background-color: hsl(var(--muted)); 
    color: hsl(var(--muted-foreground));
    font-family: var(--font-architects-daughter);
    @apply px-2 py-1 text-xs rounded-sm border border-dashed border-[hsl(var(--border))] m-1 hover:bg-[hsl(var(--border))] hover:text-background shadow-sm; /* Smaller font, padding */
}

.tool-card > div[data-slot="card-content"], 
.tool-card .p-6.pt-0 { 
  @apply p-3; /* Override default ShadCN card content padding */
  padding-top: 0px; /* Explicitly set padding-top to 0 to avoid circular dependency */
  overflow-wrap: break-word;
  word-break: break-word;
}

.phrase-card {
  @apply p-2 flex flex-col bg-background shadow-sm hover:shadow-md transition-shadow border-border/70; /* Smaller padding */
  overflow-wrap: break-word; 
  word-break: break-word;
}

.phrase-card > span.font-semibold {
  display: block; 
  overflow-wrap: break-word;
  word-break: break-word;
  @apply text-base; /* Ensure it's not too large */
}
.phrase-card .text-xs {
  @apply mb-1; /* Tighter spacing */
}
.phrase-card .mt-auto {
 @apply pt-1; /* Tighter spacing */
}


.main-section-box .accordion-content-inner-padding { /* New class to target inner content of accordion */
  @apply pt-2 pb-3 px-1; /* Tighter padding for content within main sections */
}
    

    




